var c={},t="undefined"==typeof win?window:win,v="undefined"==typeof doc?document:doc;
t.vidible=function(a){function b(){return"14.12.b80"}function d(){return g}function e(a){if(h){a=this.$a=a.playerTemplate;var b=h.style;b.width=a.playerWidth+"px";b.height=a.playerHeight+"px"}}var f=t.vidible,g=f&&f._getContexts&&f._getContexts()||{},h=f&&f.mainFrame,k=[];a.ta=function(a){k.push(a)};a.gn=d;a.om=function(a){delete g[a]};a.ge=b;a.wn=function(){return h};a.createPlayer=function(b){b=new a.Xe.gg(b,k);g[b.id]=b;b.Ol();h&&b.addEventListener(b.gc.X.Ub.fa,e);return b.kl()};a.getContext=
function(a){return g[a]};a._getContexts=d;a.version=b;a.destroyAll=function(){for(var b in g)g[b]instanceof a.Xe.gg&&g[b].Eb&&g[b].Eb.Vh()};return a}(c);c.Ic={};
(function(a){function b(){if(window.XDomainRequest&&!RegExp("msie"+(isNaN(10)?"":"\\s10"),"i").test(navigator.userAgent))return new function(){var a=this,b=new XDomainRequest;a.status=0;a.readyState=0;a.setRequestHeader=function(){};a.open=function(d,e){b.open(d,e);b.onerror=function(){a.status=499;a.responseText="";a.ka="";a.readyState=4;a.onreadystatechange()};b.onprogress=function(){a.readyState=2;a.onreadystatechange()};b.onload=function(){a.responseText=b.responseText;a.ka=b.contentType;a.readyState=
4;a.onreadystatechange()};b.ontimeout=function(){a.status=408;a.responseText="";a.ka="";a.readyState=4;a.onreadystatechange()};b.timeout=0;a.readyState=1;a.onreadystatechange()};a.send=function(a){b.send(a)}};if("undefined"===typeof XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(d){}}else return new XMLHttpRequest;
return!1}function d(a){if("string"!==typeof a||!a)return null;a=c.Tc.trim(a);a=c.Tc.Bf(a,"'","\\'");return eval("("+a+")")}function e(a,e){function h(){var a={Accept:"text/javascript, application/json, text/html, application/xml, text/xml, */*","Content-Type":"application/x-www-form-urlencoded"},b;for(b in a)e.headers.hasOwnProperty(b)||(e.headers[b]=a[b]);e.contentType&&(e.headers["Content-Type"]=e.contentType);for(b in e.headers)k.setRequestHeader(b,e.headers[b]);try{k.send(e.be)}catch(d){e.error&&
e.error()}}var k=b(),l={},m;"undefined"===typeof e&&(e={});e.method=e.method?e.method.toLowerCase():"get";e.async=!1===e.async?!1:!0;e.be=e.be||"";k.onreadystatechange=function(){if(4==k.readyState){var a=k.ka||k.getResponseHeader("content-type")||"";l.status=k.status;l.text=k.responseText;if(/json/.test(a))l.data=d(k.responseText);else if(/xml/.test(a)){a=k.responseText;if(window.DOMParser)a=(new DOMParser).parseFromString(a,"text/xml");else{var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";
b.loadXML(a);a=b}l.data=a}l.Uc=200<=k.status&&300>k.status||304==k.status||0==k.status&&k.responseText;l.Uc?e.Uc&&e.Uc(l,k):e.error&&e.error(l,k);e.complete&&e.complete(l,k)}};k.open(e.method,a,e.async);e.headers=e.headers||{};return m={Dn:function(a,b){e.headers[a]=b;return m},send:function(a,b){e.be=c.b.mc(a);e.complete=b;h();return m},end:function(a){e.complete=a;h();return m},data:function(a){e.be=c.b.mc(a);return m}}}a.get=function(a,b,d,k,l,m){"undefined"===typeof m&&(m={});m.Uc=d;m.error=k;
m.method="get";return e(a,m).send(b,l)};a.Hn=function(a,b,d,k,l,m){"undefined"===typeof m&&(m={});m.Uc=d;m.error=k;m.method="post";return e(a,m).send(b,l)}})(c.Ic);c.l={};
(function(a){a.Kh=function(a){var b=a.Array.prototype;a=a.Function.prototype;void 0===a.bind&&(a.bind=function(a){var d=this,e=b.slice.call(arguments,1);return function(){return d.apply(a||null,e.concat(b.slice.call(arguments)))}})};a.Kh(window);var b=!1,d=/xyz/.test(function(){return"xyz"})?/\b_super\b/:/.*/;a.n=function(){};a.n.extend=function(a){function f(){!b&&this.f&&this.f.apply(this,arguments)}var g=this.prototype;b=!0;var h=new this;b=!1;for(var k in a)h[k]="function"==typeof a[k]&&"function"==
typeof g[k]&&d.test(a[k])?function(a,b){return function(){var d=this._super;this._super=g[a];try{return b.apply(this,arguments)}finally{this._super=d}}}(k,a[k]):a[k];f.prototype=h;f.prototype.constructor=f;f.extend=arguments.callee;return f}})(c.l);c.b={};
(function(a){function b(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function d(){var a=new Date,b=(10>a.getHours()?"0"+a.getHours():a.getHours())+":"+(10>a.getMinutes()?"0"+a.getMinutes():a.getMinutes())+":",d=a.getSeconds();return b+(10>d?"0"+d:d)+"."+(10>a.getMilliseconds()?"00"+a.getMilliseconds():100>a.getMilliseconds()?"0"+a.getMilliseconds():a.getMilliseconds())}a.vj=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);a.kg=function(){return b()+b()+
"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};a.log=function(a){t.console&&t.console.log(d()+" "+a)};a.log("Vidible version: "+c.ge());a.mc=function(a){if(!a)return null;if("string"===typeof a)return a;var b=[];if(a&&"object"==typeof a)for(var d in a){var h=a[d];if(void 0!=h&&"function"!=typeof h&&""!==h){var k=encodeURIComponent(d)+"=",k=k+encodeURIComponent(String(h));b.push(k)}}return b.join("&")};a.nl=function(a){var b={};if(a){b={};a=a.split("&");for(var d=0;d<a.length;d++){var h=a[d].split("=");
try{var k=decodeURIComponent(h[0]),l=void 0;1<h.length&&(l=decodeURIComponent(h[1]));b[k]=l}catch(m){c.b.log("WARN: Can't read parameter ["+h+"]")}}}return b};a.ba=function(a){var b=Array.prototype.toJSON;Array.prototype.toJSON=void 0;a=window.JSON&&window.JSON.stringify?JSON.stringify(a,void 0,void 0):String.valueOf(a);Array.prototype.toJSON=b;return a};a.Zk=t.atob&&t.atob.bind(t)||function(a){var b="",d,h,k,l,m,p=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");p<a.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(p++)),
h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(p++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(p++)),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(p++)),d=d<<2|h>>4,h=(h&15)<<4|l>>2,k=(l&3)<<6|m,b+=String.fromCharCode(d),64!=l&&(b+=String.fromCharCode(h)),64!=m&&(b+=String.fromCharCode(k));return b};a.copy=function(a,b){b=b||{};for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);
return b};a.on=function(b,d){for(var g={},h=0;h<arguments.length;h++)a.copy(arguments[h],g);return g};a.Cm=function(a){a=a.split(":");var b=0,d=[0.01,1,60,3600];a.reverse();for(var h=0;h<a.length;h++)b+=a[h]*d[h];return b}})(c.b);c.o={};window.Cj&&Node.prototype.__defineGetter__&&window.Cj&&window.fn&&Node.prototype.__defineGetter__("outerHTML",function(){return c.Tc.Bf(c.Tc.Bf((new XMLSerializer).serializeToString(this),"%7B","{"),"%7D","}")});
(function(a){var b={};a.qf=function(a){function e(a,b,d){var e="TABLE"===a.nodeName,f;f=this.createElement("div");f.innerHTML="<"+a.nodeName+">"+b+"</"+a.nodeName+">";d(e?a.lastChild:a,e?f.lastChild.lastChild:f.lastChild)}function f(a){var b="",d,e;for(e=0;a[e];e++)d=a[e],d.nodeType===k.TEXT_NODE||d.nodeType===k.CDATA_SECTION_NODE?b+=d.nodeValue:d.nodeType!==k.COMMENT_NODE&&(b+=f(d.childNodes));return b}var g=a||document,h=g.bf&&b[g.bf];if(h)return h;var h={},k={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,
CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};h.nm=function(a,b){a.removeAttribute(b)};h.kn=function(a,b,d){return"undefined"===typeof d?a.getAttribute(b):null===d?h.nm(a,b):a.setAttribute(b,d)};h.jc=function(a){var b;b=this.createElement("div");b.innerHTML=a;return b.lastChild};h.replace=function(a,b){e(a,b,function(b,d){a.replaceChild(d,b)})};h.append=function(a,
b){e(a,b,function(a,b){a.appendChild(b.firstChild);return b.firstChild})};h.Wd=function(a,b){if(1===arguments.length)return a.innerHTML;try{a.innerHTML=b}catch(d){h.replace(a,b)}};h.text=function(a,b){if(1===arguments.length)return f([a]);h.empty(a);a.appendChild(g.createTextNode(b))};h.empty=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};h.createElement=function(a){return g.createElement(a)};h.createDocumentFragment=function(){return g.createDocumentFragment()};g.bf=c.b.kg();return b[g.bf]=
h};a.Ki=a.qf(v);a.o=a.qf(document)})(c);c.ma=c.l.n.extend({f:function(){this.vd={}},addEventListener:function(a,b){var d=this.vd[a];d||(this.vd[a]=d=[]);d.push(b)},removeEventListener:function(a,b){for(var d=this.vd[a]||[],e=0;e<d.length;e++)d[e]==b&&(d.splice(e,1),e--)},dispatchEvent:function(a,b){var d,e;"string"===typeof a?(d=a,e=Array.prototype.slice.call(arguments,1)):(d=a.type,a.target=this,e=Array.prototype.slice.call(arguments,0));var f=this.vd[d];if(f)for(var g=0,h=f.length;g<h;g++)try{f[g].apply({},e)}catch(k){c.b.log("[ERROR] Handling event: "+
k+" : "+c.b.ba({type:d,args:e}))}}});c.Tc={};(function(a){a.nn=function(a,d){return a=a.substring(0,a.lastIndexOf("."))+"."+d};a.trim=function(b,d){return a.Xl(a.rm(b,d),d)};a.Xl=function(a,d){return a.replace(RegExp("^["+(d||"\\s")+"]+","g"),"")};a.rm=function(a,d){return a.replace(RegExp("["+(d||"\\s")+"]+$","g"),"")};a.Jn=function(a,d){return-1!==a.indexOf(d,0)};a.rn=function(a,d){return-1!==a.indexOf(d,a.length-d.length)};a.Bf=function(a,d,e){return a.replace(RegExp(d,"g"),e)}})(c.Tc);c.e={};
(function(a){function b(a,b){a||(a=window.event);a.stop=function(){var b=a;b.preventDefault(b);b.stopPropagation(b)};"undefined"===typeof a.target&&(a.target=a.srcElement||b);a.preventDefault||(a.preventDefault=function(){a.returnValue=!1});a.stopPropagation||(a.stopPropagation=function(){a.cancelBubble=!0});a.target&&3===a.target.nodeType&&(a.target=a.target.parentNode);var d=b.ownerDocument;if(d&&null==a.pageX&&null!=a.clientX){var e=d.documentElement,d=d.body;a.pageX=a.clientX+(e&&e.scrollLeft||d&&
d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0)}}function d(a,d){return function(e){b(e,a);return d(e)}}function e(){if(!k){document.body||setTimeout(e,13);k=!0;for(var b=0;b<a.zf.length;b++)a.zf[b]();a.zf=null}}function f(){if(!k){try{document.documentElement.doScroll("left")}catch(a){setTimeout(f,1);return}e()}}var g=[],h=!1,k=!1,l;a.zf=[];"undefined"!==typeof document&&(document.addEventListener?l=
function(){document.removeEventListener("DOMContentLoaded",l,!1);e()}:document.attachEvent&&(l=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",l),e())}));(function(){if(!h)if(h=!0,"complete"===document.readyState)e();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",l);window.attachEvent("onload",e);var a=!1;try{a=null==
window.frameElement}catch(b){}document.documentElement.doScroll&&a&&f()}})();a.addEventListener=function(a,b,e){if(3!==a.nodeType&&8!==a.nodeType){var f=d(a,e);g.push({element:a,type:b,Wa:e,qm:f});b.match(/:/)&&a.attachEvent?a.attachEvent("ondataavailable",f):a.addEventListener?a.addEventListener(b,f,!1):a.attachEvent&&a.attachEvent(b.match(/:/)?b:"on"+b,f)}};a.dispatchEvent=function(a,d,e){var f;f=a.ownerDocument||a.document;if(f.createEvent)return f=f.createEvent("HTMLEvents"),f.data=e,b(f,a),f.sl=
d,f.initEvent(d,!0,!0),!a.dispatchEvent(f);f=f.createEventObject();b(f,a);f.data=e;return d.match(/:/)?(f.sl=d,f.tl="ondataavailable",a.fireEvent(f.tl,f)):a.fireEvent(d.match(/:/)?d:"on"+d,f)};a.removeEventListener=function(a,b,d){if(3!==a.nodeType&&8!==a.nodeType){for(var e=0,f,h=0;h<g.length;h++)g[h].element!==a||g[h].type!==b||g[h].Wa!==d?g[e++]=g[h]:f=g[h].qm;g.length=e;d=f;document.removeEventListener?a.removeEventListener(b,d,!1):a.detachEvent(b.match(/:/)?b:"on"+b,d)}};a.Mm=function(b){var d=
{};d.element=b;d.ea=function(a,b){for(var d=a.split(" "),e=0;e<d.length;e++)this.addEventListener(d[e],b)};d.addEventListener=function(d,e){a.addEventListener(b,d,e)};d.removeEventListener=function(d,e){a.removeEventListener(b,d,e)};return d}})(c.e);c.La={};c.La.hd={oj:"flash",pj:"html5",Kj:"smart",sj:"hulu"};c.La.e={};(c.La.e.zc={}).te="playlistend";c.PLAYLIST_END=c.La.e.zc.te;c.Xe={};
c.Xe.gg=c.l.n.extend({f:function(a,b){var d=a.content||a.contentId,e="string"==typeof d?document.getElementById(d):d;if(!e){var f="ERROR: can't find DOM container '"+d+"'";c.b.log(f);throw Error(f);}this.Ml=e;d={};for(f in c)d[f]=c[f];d.gc=this;this.gc=d;this.id=c.b.kg();this.Xa=a.preview;this.Jc=a.bid;this.lc=a.pid;this.Db=a.apid;this.Gb=a.bcid;this.pf=a.it;this.ca=c.b.nl(a.params);this.Jh=a.bidModifier||window.vdbBidModifier||{};this.Ai=a.site;window.vdbBidModifier=void 0;this.eg="http://delivery.vidible.tv/";this.Kg=
this.Xa?"":"http://trk.vidible.tv/trk";this.ml=b.slice();this.Va=new c.ma},Ud:function(){return this.Jh.query},addEventListener:function(a,b){this.Va.addEventListener(a,b)},removeEventListener:function(a,b){this.Va.removeEventListener(a,b)},dispatchEvent:function(a){var b=Array.prototype.slice.call(arguments);this.Va.dispatchEvent.apply(this.Va,b)},Ol:function(){for(var a=this.ml,b=[];def=a.shift();)try{def(this.gc,this)}catch(d){b.push(d)}if(0<b.length)throw Error("ERROR: can't initialize context:\n"+b.join("\n"));
},kl:function(){return new this.gc.Eb.Dg(this.Ml)}});c.ta(function(a,b){a.Q={};a.Q.Oa={};a.Q.Oa=c.l.n.extend(function(){function a(){var d=b.Jc,f=b.lc,g=b.Db,h=b.Gb,k=b.id,l=c.version(),m=b.Ai,m=m?decodeURIComponent(m):"",d={bid:d,pid:f,apid:g,bcid:h,sid:k,pv:l,r:m?m:window.top!=window?document.referrer:window.top.location.href},p;for(p in b.ca)d[p]=b.ca[p];return d}return{f:function(){c.b.log("ctx.tracking.PixelTracker::()")},I:function(e,f){var g;g=c.b.mc(a());var h=c.b.mc(f);g=b.Kg+"/"+e+"?"+g+(h?"&"+h:"")+"&cb="+Math.random();b.Xa?c.b.log("PIXEL (log only): "+
g):this.Ue(g)},Ue:function(a){c.b.log("PIXEL: "+a);c.o.createElement("img").src=a},getContext:function(){return b}}}());(function(){var b="unknown";try{if(navigator.plugins&&0<navigator.plugins.length){var e=navigator.mimeTypes;e&&e["application/x-shockwave-flash"]&&e["application/x-shockwave-flash"].enabledPlugin&&e["application/x-shockwave-flash"].enabledPlugin.description&&(b=e["application/x-shockwave-flash"].enabledPlugin.description)}}catch(f){b="error"+(f.message?":"+f.message:"")}(new a.Q.Oa).I("minjs-loaded.gif",
{fpv:b})})()});c.ta(function(a){a.Q.hg={};a.Q.hg=a.Q.Oa.extend(function(){return{f:function(){this._super();c.b.log("ctx.tracking.ErrorTracker::()")},Dm:function(a,d,e){this.I("error.gif",{et:a,st:d,dt:c.b.ba(e)})},Em:function(a,d){var e={params:a};c.b.copy(d,e);this.Dm("no_params",void 0,e)}}}())});c.ta(function(a){a.Q.gd={};a.Q.gd=a.Q.Oa.extend(function(){return{f:function(){this._super();c.b.log("ctx.tracking.HwmTracker::()")},Gm:function(a){this.I("video-stats.gif",{nv:a.Km||0,t:Math.round(a.Lm)||0})},Jf:function(a){this.I("video-time.gif",{t:Math.round(a.Pb)||0,pct:a.xf||0,vid:a.N})}}}())});c.ta(function(a,b){a.X={};a.X.Ub={};a.X.Ub=c.l.n.extend(function(){return{load:function(){var d=b.eg+"placement/"+encodeURIComponent(b.Jc)+"/"+encodeURIComponent(b.lc),e={},f=!0;b.Ud()&&(e.q=b.Ud(),f=!1);b.Db&&(e.apid=b.Db,f=!1);b.Gb&&(e.bcid=b.Gb,f=!1);f||(d+="?"+c.b.mc(e));c.Ic.get(d,null,function(d){d=d.data;c.b.log("INFO: Placement with "+(d.bid.videos||[]).length+" video(s)");b.dispatchEvent(a.X.Ub.fa,d)},function(a){c.b.log("ERROR: can't load config! status: "+a.status)})}}}());(function(a){a.fa=
"PlacementLoadedEvent";a.get=function(){a.O||(a.O=new a);return a.O}})(a.X.Ub)});c.ta(function(a,b){a.X.rc={};a.X.rc=c.l.n.extend(function(){return{load:function(d){b.Jh=d;d=b.eg+"placement/"+encodeURIComponent(b.Jc)+"/"+encodeURIComponent(b.lc);var e={},f=!0;b.Ud()&&(e.q=b.Ud(),f=!1);b.Db&&(e.apid=b.Db,f=!1);b.Gb&&(e.bcid=b.Gb,f=!1);f||(d+="?"+c.b.mc(e));c.Ic.get(d,null,function(d){d=d.data.bid;c.b.log("INFO: Bid updated with "+(d.videos||[]).length+" video(s)");b.dispatchEvent(a.X.rc.fa,d)},function(a){c.b.log("ERROR: can't update the bid! status: "+a.status)})}}}());(function(a){a.fa=
"BidLoadedEvent";a.get=function(){a.O||(a.O=new a);return a.O}})(a.X.rc)});c.ta(function(a,b){a.la={};a.la.lg={};a.la.lg=c.l.n.extend(function(){return{f:function(){this.ib=!1;this.Ja=new a.Q.gd},cm:function(a){this.Ja.I("error.gif",{vid:a.N,et:a.type,st:a.Am,dt:a.Ze})},vf:function(){this.Ja.I("display.gif",{dt:(new Date).getTime()-b.pf})},wf:function(a){this.ib=!1;this.Ja.I("video-play.gif",{vid:a.N,w:a.width,h:a.height})},im:function(a){this.Ja.I("video-decile.gif",{vid:a.N,d:a.ll})},hm:function(a){this.ib||(this.ib=!0,this.Ja.Jf(a))},bm:function(a){this.Ja.I("ad-engine-flow.gif",
{vid:a.N,stg:"started"})},am:function(a){this.Ja.I("ad-engine-flow.gif",{vid:a.N,stg:"finished"})},sf:function(){return this.ib?!0:!1}}}())});c.ta(function(a,b){a.k={};a.k.Sb={};a.k.Sb=c.l.n.extend(function(){function d(a){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(v.createTextNode("Unable to play video. Neither flash nor html5 is supported!"))}return{jl:function(e,f,g,h,k,l){function m(){c.b.log("[WARN] html5 is not supported");q();d(e)}function p(){c.b.log("[WARN] flash is not supported. Fallback to html5");b.removeEventListener(a.k.ga,p);b.addEventListener(a.k.ga,m);new a.k.qb(e,f,g,h,k,l)}function q(){b.removeEventListener(a.k.eb,
q);b.removeEventListener(a.k.ga,p);b.removeEventListener(a.k.ga,m)}b.addEventListener(a.k.eb,q);b.addEventListener(a.k.ga,p);new a.k.ed(e,f,g,h,k,l)},Rh:function(e,f,g,h,k,l){function m(){c.b.log("[WARN] flash is not supported");q();d(e)}function p(){c.b.log("[WARN] html5 is not supported. Fallback to flash");b.removeEventListener(a.k.ga,p);b.addEventListener(a.k.ga,m);new a.k.ed(e,f,g,h,k,l)}function q(){b.removeEventListener(a.k.eb,q);b.removeEventListener(a.k.ga,p);b.removeEventListener(a.k.ga,
m)}b.addEventListener(a.k.eb,q);b.addEventListener(a.k.ga,p);new a.k.qb(e,f,g,h,k,l)}}}());a.k.Sb.Sl=new a.k.Sb;a.k.Sb.hl=function(b,e,f,g,h,k){var l=a.k.Sb.Sl,m=(e.playerType||"").toLowerCase();switch(m){case c.La.hd.oj:new a.k.ed(b,e,f,g,h,k);break;case c.La.hd.pj:l.Rh(b,e,f,g,h,k);break;case c.La.hd.Kj:c.b.vj?l.Rh(b,e,f,g,h,k):l.jl(b,e,f,g,h,k);break;case c.La.hd.sj:new a.k.F(b,e,f,g,h);break;default:throw"Unknown player type: "+m;}}});c.ta(function(a){a.k.$c={};a.k.$c=c.l.n.extend(function(){return{f:function(){},addEventListener:function(){},removeEventListener:function(){},ab:function(){},Aa:function(){},ri:function(){},hc:function(){}}}());a.k.eb="AdapterCreatedEvent";a.k.ga="AdapterNotSupportedEvent"});c.ta(function(a,b){a.k.ed={};a.k.ed=a.k.$c.extend(function(){function d(a){if(a=a.videos)for(var b=0;b<a.length;b++){var d=a[b],e=d.videoUrls;e&&e.length&&(d.videoUrl=e[0])}}var e={};e[c.La.e.zc.te]="System.ShowReplay";return{f:function(e,g,h,k,l,m){function p(a){var b=w.vidiblePlayer;b?a(b):setTimeout(function(){p(a)},0)}this._super();this.Nc=c.o.jc("<div>Please install Flash plugin</div>");this.Nc.style.width="100%";this.Nc.style.height="100%";var q="vdb_flash_"+b.id;e.appendChild(this.Nc);b.ca.pt=
"flash";d(l);e={objectId:q,playerTemplate:encodeURIComponent(c.b.ba(h)),adSettings:encodeURIComponent(c.b.ba(k)),geo:encodeURIComponent(c.b.ba(m)),bid:encodeURIComponent(c.b.ba(l)),contextString:encodeURIComponent('vidible.getContext("'+b.id+'")'),playerId:b.lc,bidId:b.Jc,sessionId:b.id,previewMode:""+(b.Xa||!1),impressionTimestamp:b.pf,trackingBaseURL:encodeURIComponent(b.Kg),trackingParams:encodeURIComponent(c.b.ba(b.ca)),site:b.Ai};b.Db&&(e.adPackageId=b.Db);b.Gb&&(e.buyerCompanyId=b.Gb);var x=
this,w=this.Nd=z.rl(this.Nc,{id:q,src:null!=g&&null!=g.url?g.url:"http://cdn.vidible.tv/prod/2013-02/26/511b13fde4b0c704f12cfd68_v12.swf",version:[10,0],wmode:"transparent",$d:function(){return""}},e).yl();!w||w&&"object"!=w.tagName.toLowerCase()?(this.hc(),b.dispatchEvent(a.k.ga,this)):p(function(d){x.Yh=d;b.dispatchEvent(a.k.eb,x)})},addEventListener:function(a,b){a&&b&&this.Yh.addEventListener(e[a.toLowerCase()]||a,b)},removeEventListener:function(a,b){a&&b&&this.Yh.removeEventListener(e[a.toLowerCase()]||a,b)},ab:function(a){this.Nd&&this.Nd.updateBid(a)},
Aa:function(){if(this.Nd)return this.Nd.getPlayerState()},hc:function(){var a=this.Nc;a&&a.parentNode&&(c.b.log("[DEBUG] Dispose flash adapter"),a.parentNode.removeChild(a))}}}())});c.ta(function(a,b){a.k.qb={};a.k.qb=a.k.$c.extend(function(){var d={};d[c.La.e.zc.te]="PlayerReplayEvent";return{f:function(d,f,g,h,k){this._super();if(a.k.qb.isSupported()){b.ca.pt="html5";this.Nk=g;var l=c.Ki.createElement("iframe");l.style.cssText="width:100%;height:100%;border:0;";l.scrolling="no";d.appendChild(l);var m=l.contentWindow,p=l.contentDocument;p.open();c.l.Kh(m);a.o=c.qf(p);a.gc=b;for(var q in t)if(t[q]==c)m[q]=a;else if(void 0===t[q]||null===t[q]||!0===t[q]||!1===t[q])m[q]=t[q];var x=
this;m.onLoaded=function(){function d(){m.create?(c.b.log("[DEBUG] HTML5Adapter::createInternalPlayer"),x.s=m.create(x.Ib,e,t,v),b.dispatchEvent(a.k.eb,x)):(c.b.log("Waiting for player script to be loaded..."),setTimeout(d,100))}x.Ib=p.getElementsByTagName("div")[0];var e={km:f,$a:g,Cb:h,Ih:k};d()};p.write('<!DOCTYPE html><html style="height:100%"><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/></head><body style="margin:0;height:100%"><div style="height:100%;position:relative"></div><script type="text/javascript" src="http://cdn.vidible.tv/prod/js/html5/player-14.12.b80-min.js">\x3c/script><script type="text/javascript">setTimeout(onLoaded,0);\x3c/script></body></html>');
p.close()}else b.dispatchEvent(a.k.ga,this)},addEventListener:function(a,b){a&&b&&this.s.addEventListener(d[a]||a,b)},removeEventListener:function(a,b){a&&b&&this.s.removeEventListener(d[a]||a,b)},ab:function(a){this.s&&this.s.ab(a)},Aa:function(){if(this.s){var a=this.s.Aa();a.sellerId=this.Nk.ownerId;return a}},hc:function(){var a=this.Ib;a&&a.parentNode&&(c.b.log("[DEBUG] Dispose html5 adapter"),a.parentNode.removeChild(a))}}}());(function(a){var b=c.o.createElement("video");a.isSupported=function(a){return!!(b&&
"function"==typeof b.canPlayType&&(a?b.canPlayType(a):1))}})(a.k.qb)});c.ta(function(a,b){a.k.F={};(function(d){d.F=a.k.$c.extend(function(){function e(){this.B.dispatchEvent(d.F.Qb,{N:this.kb})}function f(){this.B.dispatchEvent(d.F.pb,{N:this.kb})}function g(a){"clip"==a&&0!=Math.round(this.Zb)&&this.B.dispatchEvent(d.F.Og,{N:this.kb,Pb:this.Zb,xf:this.Zb/this.ud})}function h(a){this.Zb=a.position;this.ud=a.duration;if("clip"===this.sk){a=this.Zb;for(var b=this.ud,e=0;10>=e;e++)if(a>=b*e/10)for(var f=0;f<=e;f++){var q=f;this.wd[q]||(this.wd[q]=!0,this.B.dispatchEvent(d.F.we,
{N:this.kb,ll:q}))}}}function k(a){this.sk=a;if("clip"==a){c.b.log("[INFO] Hulu Video started");for(a=0;10>=a;a++)this.wd[a]=!1;this.Gc++;this.B.dispatchEvent(d.F.tb,{N:this.kb,width:this.Yb.offsetWidth,height:this.Yb.offsetHeight})}else"ad"==a&&(c.b.log("[INFO] Hulu Ad start playing"),this.ok=(new Date).getTime(),this.rh++)}function l(a){c.b.log("[DEBUG] HuluAdapter::onVideoMetadata()   \nclipInfo = "+c.b.ba(a));this.Ra=a.length}function m(a){c.b.log("[ERROR] hulu player error: "+a.description);
this.B.dispatchEvent(d.F.vc,{N:this.kb,type:"hulu",Am:a.type+": "+a.displayMessage,Ze:a.description})}function p(){this.B.dispatchEvent(d.F.vg);c.b.log("[DEBUG] HuluAdapter::onPlayerReady()");this.zb=(new Date).getTime();this.rb.adComponent.hide();this.rb.videoPlayerComponent.setSize(this.nh,this.mh);if(this.De<this.xh.length-1){this.De++;var a=this.xh[this.De];this.kb=a.videoId;a=a.metadata["hulu:id"];c.b.log("[INFO] HuluAdapter: play video with id="+this.kb+" and huluId="+a);this.rb.videoPlayerComponent.playVideo(a)}}
function q(a,b){var d={};d[a]=b.bind(this);this.rb.addListener(a,d)}function x(){c.b.log("HuluAdapter::listenPlayer");q.call(this,"newsiteError",m);q.call(this,"videoMetadata",l);q.call(this,"videoStart",k);q.call(this,"videoPlayheadUpdate",h);q.call(this,"videoComplete",g);q.call(this,"videoAdBegin",f);q.call(this,"videoAdEnd",e);this.rb.readyEventFired()?(c.b.log("[DEBUG] HuluAdapter::attachReporterToHuluPlayer(): NewSite ready"),p.call(this)):(c.b.log("[DEBUG] HuluAdapter::attachReporterToHuluPlayer(): NewSite not ready, attach listeners"),
q.call(this,"newsiteReady",p))}function w(d){c.b.log("[DEBUG] HuluAdapter::embedHuluPlayer()");var e=c.o.createElement("iframe");e.style.cssText="width:100%;height:100%;border:0;";e.scrolling="no";d.appendChild(e);var f=e.contentWindow,q=e.contentDocument;q.open();var h=c.b.log.bind(c.b),g=this;f.onLoaded=function(){h("[DEBUG] HuluAdapter: iframe loaded");g.rb=f.NewSite;g.rb?(g.Dk=q.getElementsByTagName("div")[0],x.call(g),b.dispatchEvent(a.k.eb,g)):(h("[ERROR] HuluAdapter: NewSite not found"),b.dispatchEvent(a.k.ga,
g))};q.write('<!DOCTYPE html><html style="height:100%"><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/></head><body style="margin:0;height:100%"><div id="videoPlayerComponent"></div><div id="adComponent"></div><script src="http://config.hulu.com/js/hulu_global.js?guid=0B1CEA04-DCCB-40cf-AD0E-5222EF66D519&partner=Vidible&width='+this.nh+"&height="+this.mh+'" id="NS_GUID_JS" type="text/javascript">\x3c/script><script type="text/javascript">setTimeout(onLoaded,0);\x3c/script></body></html>');
q.close()}return{f:function(e,f,q,h,g){this._super();c.b.log("[DEBUG] HuluAdapter::()");b.ca.pt="hulu";this.Yb=e;this.B=new c.ma;this.nh=q.playerWidth||300;this.mh=q.playerHeight||250;this.Gc=this.rh=0;this.xh=g.videos;this.Ab=!1;this.De=-1;this.wd=[];for(f=0;10>=f;f++)this.wd[f]=!1;this.aa=new a.la.lg;this.addEventListener(d.F.vg,this.aa.vf.bind(this.aa));this.addEventListener(d.F.tb,this.aa.wf.bind(this.aa));this.addEventListener(d.F.Og,this.aa.hm.bind(this.aa));this.addEventListener(d.F.we,this.aa.im.bind(this.aa));
this.addEventListener(d.F.pb,this.aa.bm.bind(this.aa));this.addEventListener(d.F.Qb,this.aa.am.bind(this.aa));this.addEventListener(d.F.vc,this.aa.cm.bind(this.aa));w.call(this,e)},addEventListener:function(a,b){this.B.addEventListener(a,b)},removeEventListener:function(a,b){this.B.removeEventListener(a,b)},ab:function(){throw Error("Update Bid operation is not supported");},Aa:function(){return{currentTime:this.Zb,videoLength:this.Ra||0,currentPercent:this.Zb/this.Ra||0,videoId:this.kb,w:this.Yb.offsetWidth,
h:this.Yb.offsetHeight,hwmSent:this.aa.sf(),totalAdTime:((new Date).getTime()-this.ok)/1E3,totalAdsCount:this.rh,totalPlayTime:((new Date).getTime()-this.zb)/1E3,totalVideoCount:this.Gc}},ri:function(){this.rb.videoPlayerComponent.setSize(this.Yb.offsetWidth,this.Yb.offsetHeight)},hc:function(){var a=this.Dk;a&&a.parentNode&&(c.b.log("[DEBUG] Dispose hulu adapter"),a.parentNode.removeChild(a))}}}());d.F.vg="Hulu.PlayerReady";d.F.tb="Hulu.VideoPlay";d.F.Og="Hulu.VideoComplete";d.F.we="Hulu.VideoDecile";
d.F.pb="Hulu.AdStart";d.F.Qb="Hulu.AdFinish";d.F.vc="Hulu.Error"})(a.k)});c.ta(function(a,b){a.Eb={};a.Eb.Dg={};a.Eb.Dg=c.l.n.extend(function(){function d(a){c.b.log("DEBUG ctx.api.PlayerAPI::onAdapterCreated");this.k=a;for(var b in this.Mb)a=this.Mb[b],this.Mb.hasOwnProperty(b)&&"function"!=typeof a&&this.k.addEventListener(b,a.Wa);for(;b=this.Ye.shift();)b()}function e(a){this.Ii(a)}function f(a){this.k&&this.k.ab(a)}function g(a,b){var d=this.Mb[a];d?d.count++:(d={Wa:b,count:1},this.Mb[a]=d,this.k.addEventListener(a,b))}function h(a){var b=this.Mb[a];b&&0<b.count&&(b.count--,
0==b.count&&(this.k.removeEventListener(a,b.Wa),delete this.Mb[a]))}function k(){if(this.k){var a;try{a=this.k.Aa()}catch(b){c.b.log("ERROR: can't get player state: "+b.name+" : "+b.message);return}c.b.log("UNLOAD: player state: "+c.b.ba(a));this.Ja.Gm({Km:a.totalVideoCount,Lm:a.totalPlayTime});a.hwmSent?c.b.log("UNLOAD: HWM has been already sent."):a.videoId?this.Ja.Jf({N:a.videoId,Pb:a.currentTime,xf:a.currentPercent}):this.vk.Em("videoId",{t:a.currentTime})}else c.b.log("UNLOAD (without player adapter).")}
function l(a,d){a.vdb_Context=b;a.vdb_Player=d;b.getPlayer=function(){return d}}function m(){var a=Math.round(this.element.offsetWidth/this.jm);this.element.offsetHeight!=a&&(this.element.style.height=a+"px");this.k&&this.k.ri()}var p={f:function(h){b.Eb=this;this.ge=c.ge();this.Mb={};this.Ye=[];this.Ib=h;this.element=c.o.jc("<div id='vdb_"+b.id+"' style='position:relative; display:none'></div>");h.appendChild(this.element);b.addEventListener(a.k.eb,d.bind(this));b.addEventListener(a.X.rc.fa,f.bind(this));
b.addEventListener(a.X.Ub.fa,e.bind(this));b.Jc&&b.lc&&a.X.Ub.get().load();this.Ja=new a.Q.gd;this.vk=new a.Q.hg;this.Be=k.bind(this);c.e.addEventListener(t,"beforeunload",this.Be);l(h,this)},Ii:function(d){c.b.log("DEBUG ctx.api.PlayerAPI::updateConfig");var e=this.km=d.playerWidget,f=this.$a=d.playerTemplate,h=this.Cb=d.adSettings,g=this.sn=d.geo;h.Xa=b.Xa;var l=this.Ih=d.bid;f.id=b.lc;f.ownerId=d.ownerId||"50f049a7737176354b98ae32";d=f.playerWidth=parseInt(f.playerWidth)||500;var k=f.playerHeight=
parseInt(f.playerHeight)||300,p=f.playerMinWidth=parseInt(f.playerMinWidth)||320;this.jm=d/k;var s=this.element.style;s.display="";0!=this.element.offsetWidth?(s=this.element.style,s.maxWidth=d+"px",s.maxHeight=k+"px",s.minWidth=p+"px",s.width="100%",this.Dd=m.bind(this),c.e.addEventListener(t,"resize",this.Dd),this.Dd()):(s.width=d+"px",s.height=k+"px");c.o.empty(this.element);this.k&&(this.k.hc(),this.k=void 0);a.k.Sb.hl(this.element,e,f,h,l,g)},addEventListener:function(a,d){d&&"function"==typeof d&&
(d.He=d.bind(this),this.k?(b.addEventListener(a,d.He),g.call(this,a,function(d){b.dispatchEvent(a,{type:a,data:d.data})})):this.Ye.push(function(){this.addEventListener(a,d.He)}.bind(this)))},removeEventListener:function(a,d){var e=d&&d.He||d;this.k?(b.removeEventListener(a,e),h.call(this,a)):this.Ye.push(function(){this.removeEventListener(a,e)}.bind(this))},ab:function(b){a.X.rc.get().load(b)},Vh:function(){this.Be();this.k&&(this.k.hc(),this.k=void 0);var a=this.Ib;delete a.vdb_Context;delete a.vdb_Player;
a.removeChild(this.element);c.e.removeEventListener(t,"beforeunload",this.Be);c.om(b.id);this.Dd&&c.e.removeEventListener(t,"resize",this.Dd);c.b.log("INFO: '"+b.id+"' is destroyed.")},version:function(){return this.ge}};p.updateConfig=p.Ii;p.updateBid=p.ab;p.addEventListener=p.addEventListener;p.removeEventListener=p.removeEventListener;p.destroy=p.Vh;p.version=p.version;return p}())});var z=function(){function a(a,b){if(b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function b(a,b){var d=[],e;for(e in a)a.hasOwnProperty(e)&&(d[e]=b(a[e]));return d}function d(b,d,f){if(h.isSupported(d.version))b.innerHTML=h.di(d,f);else if(d.ef&&h.isSupported([6,65]))b.innerHTML=h.di(a(d,{src:d.ef}),{Zm:encodeURIComponent(location.href),Ym:"PlugIn",Xm:document.title});else if(d.$d){var g=d.$d.call(this);"string"==typeof g&&(b.innerHTML=g)}e&&(window[d.id]=document.getElementById(d.id));
a(this,{zn:function(){return b},xn:function(){return d},un:function(){return f},yl:function(){return b.firstChild}})}var e=document.all,f=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,g={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowFullScreen:!0,allowScriptAccess:"always",version:[3,0],$d:null,ef:null,Lf:!1,al:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}});var h=a({},{pn:g,Jl:function(){var a,
b;try{b=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(d){try{b=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"))&&a.GetVariable("$version")}catch(e){try{b=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"))&&a.GetVariable("$version")}catch(h){}}}return(b=f.exec(b))?[1*b[1],1*b[9<1*b[1]?2:3]]:[0,0]},Qe:function(a){if(null===a||void 0===a)return null;var d=typeof a;"object"==d&&a.push&&(d="array");switch(d){case "string":return a=a.replace(RegExp('(["\\\\])',"g"),"\\$1"),
a=a.replace(/^\s?(\d+\.?\d*)%/,"$1pct"),'"'+a+'"';case "array":return"["+b(a,function(a){return h.Qe(a)}).join(",")+"]";case "function":return'"function()"';case "object":var d=[],e;for(e in a)a.hasOwnProperty(e)&&d.push('"'+e+'":'+h.Qe(a[e]));return"{"+d.join(",")+"}"}return String(a).replace(/\s/g," ").replace(/\'/g,'"')},di:function(b,d){b=a({},b);var f='<object width="'+b.width+'" height="'+b.height+'" id="'+b.id+'"';b.al&&(b.src+=(-1!=b.src.indexOf("?")?"&":"?")+Math.random());f=b.Lf||!e?f+(' data="'+
b.src+'" type="application/x-shockwave-flash"'):f+' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';f+=">";if(b.Lf||e)f+='<param name="movie" value="'+b.src+'" />';b.width=b.height=b.id=b.Lf=b.src=null;b.$d=b.version=b.ef=null;for(var g in b)b[g]&&(f+='<param name="'+g+'" value="'+b[g]+'" />');g="";if(d){for(var k in d)if(d[k]){var w=d[k];g+=k+"="+(/function|object/.test(typeof w)?h.Qe(w):w)+"&"}g=g.slice(0,-1);f+='<param name="flashvars" value="'+g.replace(/"/g,"%5C%22")+'" />'}return f+"</object>"},
isSupported:function(a){return k[0]>a[0]||k[0]==a[0]&&k[1]>=a[1]}}),k=h.Jl();return a({rl:function(b,e,f){"string"==typeof b&&(b=document.getElementById(b.replace("#","")));if(b)return"string"==typeof e&&(e={src:e}),new d(b,a(a({},g),e),f)}},h)}();
